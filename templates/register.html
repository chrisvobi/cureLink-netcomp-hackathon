<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register Page</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/register.css') }}">
</head>
<body>
    <div class="logo-top">
        <img src="{{ url_for('static', filename='images/Logo.png') }}" alt="CureLink Logo">
    </div>

    <div class="container">
        <div class="left-section">
            <div class="logo-container">
                <h2>Register Page</h2>
            </div>

            {% with messages = get_flashed_messages(with_categories=True) %}
                {% if messages %}
                    <div class="flash-messages">
                        {% for category, message in messages %}
                            <p class="flash {{ category }}">{{ message }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
            {% endwith %}

            <form action="{{ url_for('register') }}" method="post">
                <label>Name:</label>
                <input type="text" name="name" required>
                
                <label>Email:</label>
                <input type="email" name="email" required>
                
                <label>Password:</label>
                <input type="password" name="password" required>
                
                <label>Zip Code:</label>
                <input type="text" name="zip_code" required>
                
                <label>Street:</label>
                <input type="text" name="street" required>
                
                <label>City:</label>
                <input type="text" name="city" required>
                
                <label>Register as:</label>
                <select name="user_type" id="user_type" required onchange="toggleSpecialtyField()">
                    <option value="patient">Patient</option>
                    <option value="doctor">Doctor</option>
                </select>

                <!-- Specialty dropdown -->
                <div id="specialty_field" style="display: none;">
                    <label>Specialty:</label>
                    <select name="specialty" id="specialty">
                        <option value="Anesthesiologist">Anesthesiologist</option>
                        <option value="Cardiologist">Cardiologist</option>
                        <option value="Dermatologist">Dermatologist</option>
                        <option value="Endocrinologist">Endocrinologist</option>
                        <option value="Gastroenterologist">Gastroenterologist</option>
                        <option value="Infectious Disease">Infectious Disease</option>
                        <option value="Neurologist">Neurologist</option>
                        <option value="Oncologist">Oncologist</option>
                        <option value="Ophthalmologist">Ophthalmologist</option>
                        <option value="Psychiatrist">Psychiatrist</option>
                        <option value="Pediatrician">Pediatrician</option>
                        <option value="Otolaryngologist">Otolaryngologist</option>
                        <option value="Orthopedic">Orthopedic</option>
                        <option value="Internal Medicine">Internal Medicine</option>
                        <option value="Pathologist">Pathologist</option>
                        <option value="Allergy and Immunologist">Allergy and Immunologist</option>
                        <option value="Obstetrics and Gynecologist">Obstetrics and Gynecologist</option>
                        <option value="Nephrologist">Nephrologist</option>
                        <option value="Hematologist">Hematologist</option>
                    </select>
                </div>

                <button type="submit">Register</button>
            </form>

            <p>Already have an account? <a href="{{ url_for('login') }}">Login here</a></p>
        </div>

        <div class="right-section"></div>
    </div>

    <script>
    function toggleSpecialtyField() {
        var userType = document.getElementById("user_type").value;
        var specialtyField = document.getElementById("specialty_field");

        if (userType === "doctor") {
            specialtyField.style.display = "block";
            document.getElementById("specialty").setAttribute("required", "true");
        } else {
            specialtyField.style.display = "none";
            document.getElementById("specialty").removeAttribute("required");
        }
    }
    </script>
</body>
</html>
